## Working with 'JOIN' ##

<img width="896" alt="Screenshot 2024-08-22 at 18 30 09" src="https://github.com/user-attachments/assets/f3334c0a-4723-4d5c-876f-0f539b731de7">


* A unique key in SQL ensures that all values in a specific column or a set of columns are unique across the table.
This means no two rows can have the same value in that column or set of columns.

* A foreign key establishes a link between two tables by ensuring that a column (or a set of columns) in one table matches a column (usually the primary key) in another table.
This helps maintain referential integrity between tables.

* Different types of SQL JOINS:

- (INNER) JOIN: Returns records that have matching values in both tables (only the foreign keys that match in both tables are selected);
- LEFT (OUTER) JOIN: Returns all records from the left table, and the matched records from the right table;
- RIGHT (OUTER) JOIN: Returns all records from the right table, and the matched records from the left table;
- FULL (OUTER) JOIN: Returns all records when there is a match in either left or right table;
- LEFT ANTI JOIN: Returns rows in the left table that have no matching rows in the right table (selects foreign keys that are not common between the tables); 
- RIGHT ANTI JOIN: Returns rows in the right table that have no matching rows in the left table (selects foreign keys that are not common between the tables).

**Examples**

All the work is being completed in : https://sqliteonline.com/

```sql
SELECT Pets.*, Owners.City
FROM Pets LEFT JOIN Owners ON Pets.OwnerID = Owners.OwnerID;
```

Pets whose owners are from city Flint
```sql
SELECT Pets.*, Owners.City
FROM Pets LEFT JOIN Owners ON Pets.OwnerID = Owners.OwnerID
WHERE Owners.City = 'Flint' ;
```

Counting by kind (how many cats, dogs and birds)
```sql
SELECT kind, COUNT(*) AS Count 
FROM Pets 
GROUP BY Kind
ORDER BY Count DESC;
```

Finding count of pets grouped by Owner City
```sql
SELECT Owners.City, COUNT(Pets.PetID) AS PetCount
FROM Pets
LEFT JOIN Owners ON Pets.OwnerID = Owners.OwnerID
GROUP BY Owners.City;
```

Grouping by City and Kind
```sql
SELECT Owners.City, Pets.Kind, COUNT(Pets.PetID) AS PetCount
FROM Pets JOIN Owners ON Pets.OwnerID = Owners.OwnerID
GROUP BY Owners.City, Pets.Kind;
```

Finding the list of all Pets with no Owners
```sql
SELECT Pets.* FROM Pets
LEFT JOIN Owners ON Pets.OwnerID = Owners.OwnerID
WHERE Owners.OwnerID IS NULL;
```

Finding all Owners who have no Pets
```sql
SELECT Owners.* FROM Owners
LEFT JOIN Pets ON Owners.OwnerID = Pets.OwnerID
WHERE Pets.OwnerID IS NULL;
```

Calculate the amount of sales by Procedure Type
```sql
select Sales.ProcedureCode, SUM(Procedures.Price) as TotalSales
from Sales left join Procedures ON Sales.ProcedureCode = Procedures.ProcedureCode
group by Sales.ProcedureCode
order by TotalSales DESC;
```
OR a different way
```sql
select Sales.ProcedureCode, SUM(Procedures.Price) as TotalSales
from Sales left join Procedures ON Sales.ProcedureCode = Procedures.ProcedureCode
group by Procedures.ProcedureType
order by TotalSales DESC;
```

